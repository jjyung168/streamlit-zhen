- name: Ping Streamlit app (no-fail)
  run: |
    set +e
    URL="https://app-zhen-gbvangddctfuxkqfqrfbrd.streamlit.app/"
    echo "Pinging: $URL"

    # 不跟随跳转；加 UA；遇到网络抖动重试；就算失败也不让 job 失败
    curl -sS -m 30 \
      --retry 3 --retry-delay 5 --retry-all-errors \
      -A "Mozilla/5.0 (X11; Linux x86_64)" \
      -o /dev/null -w "HTTP=%{http_code} time=%{time_total}s\n" \
      "$URL" || true

    echo "done"
