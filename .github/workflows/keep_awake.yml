name: keep-awake

on:
  schedule:
    - cron: "0 */6 * * *"
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Streamlit app (no-fail)
        run: |
          set +e
          URL="https://app-zhen-gbvangddctfuxkqfqrfbrd.streamlit.app/"
          echo "Pinging: $URL"
          curl -sS -m 30 \
            --retry 3 --retry-delay 5 --retry-all-errors \
            -A "Mozilla/5.0 (X11; Linux x86_64)" \
            -o /dev/null -w "HTTP=%{http_code} time=%{time_total}s\n" \
            "$URL" || true
          echo "done"
